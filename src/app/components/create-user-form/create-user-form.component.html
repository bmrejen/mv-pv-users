<h3 [routerLink]="['/users']">&lt;-- Back</h3>
<h2> Create User Form </h2>

<form
    #createForm="ngForm"
    (ngSubmit)="onSubmit(createForm)"
>

    <ng-container *ngIf="fields != null">
        <mv-accounts [accounts]="fields.accounts"></mv-accounts>
        <input
            type="text"
            [(ngModel)]="mailToGet"
            name="mailToGet"
        >
        <button
            type="button"
            (click)=getUser()
        >Get User</button>

        <div *ngIf="isAlias">{{ mailToGet }} IS AN ALIAS OF
            {{ currentUser.ggCurrentUser.primaryEmail | uppercase }}</div>
        <div *ngIf="isAlias === false">{{ mailToGet }} belongs to real account</div>
        <hr>


        <div class="grid-container">
            <mv-credentials
                [currentSugarUser]="currentUser.sugarCurrentUser"
                [currentUser]="currentUser"
                [civilites]="fields.civilites"
                [userFields]="fields.userFields"
                [usersFromSugar]="usersFromSugar"
                [sugarMessage]="sugarMessage"
                class="credentials"
            ></mv-credentials>

            <mv-phones
                [currentSugarUser]="currentUser.sugarCurrentUser"
                class="phones"
            ></mv-phones>
            <mv-jamespot
                class="jamespot"
                [currentJamespotUser]="currentUser.jamesCurrentUser"
                [jamesMessage]="jamesMessage"
            >
            </mv-jamespot>
            <mv-gapi-users
                [currentUser]="currentUser"
                [ggCurrentUser]="currentUser.ggCurrentUser"
                [gapiMessage]="gapiMessage"
                class="google"
            ></mv-gapi-users>
        </div>
        <mv-profiles
            [currentUser]="currentUser"
            [selectedFunction]="fields.selectedFunction"
            [selectedOffice]="fields.selectedOffice"
            [roles]="roles"
            [userTemplates]="fields.userTemplates"
            [departments]="fields.departments"
            [orgas]="fields.orgas"
            [others]="fields.others"
        ></mv-profiles>

        <mv-office
            [offices]="fields.offices"
            [currentUser]="currentUser"
        ></mv-office>
        <mv-function
            [functions]="fields.functions"
            [currentUser]="currentUser"
        ></mv-function>
        <mv-manager
            [managers]="managers"
            [currentUser]="currentUser"
        ></mv-manager>

        <mv-destinations
            [destinations]="destinations"
            [currentUser]="currentUser"
        ></mv-destinations>
        <mv-teams
            [currentUser]="currentUser"
            [teams]="teams"
        ></mv-teams>
        <mv-others
            [others]="fields.others"
            [currentUser]="currentUser"
        ></mv-others>
        <mv-extraneous [currentUser]="currentUser"></mv-extraneous>
        <mv-switchvox [currentUser]="currentUser"></mv-switchvox>
        <mv-gapps
            [currentUser]="currentUser"
            [orgas]="fields.orgas"
        ></mv-gapps>

        <div *ngIf="errorMsg">ERROR: {{ errorMsg }}</div>
        <button
            [disabled]="!createForm.form.valid"
            type="submit"
        >Cr√©er l'utilisateur</button>
    </ng-container>
</form>
<pre>{{ currentUser | json }}</pre>
