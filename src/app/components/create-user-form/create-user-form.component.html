<h2> Create User Form </h2>
<form #createForm="ngForm">
  <fieldset>
    <legend>Type de compte</legend>
    <div class="checkbox-list" id="account-type" ngModelGroup="accounts">
      <div *ngFor="let account of fields.accounts ; trackBy: trackByFn">
        <label>
          <input type="checkbox" [name]="account.label" [(ngModel)]="account.checked">{{ account.name }}
        </label>
      </div>
    </div>
  </fieldset>

  <fieldset>
    <legend>Compte utilisateur</legend>
    <div ngModelGroup="userInfo">
      <div *ngFor="let civilite of fields.civilites">
       <label>
        <input
        type="radio"
        name="gender"
        [value]="civilite.label"
        [(ngModel)]="civilite.label">
        {{ civilite.label }}
      </label>
    </div>
    <div ngModelGroup="credentials">
      <div *ngFor="let userField of fields.userFields ; trackBy: trackByFn">
       <label>{{ userField.label }}
         <input [(ngModel)]="userField.value" [name]="userField.name" type=text>
       </label>
     </div>
   </div>
 </div>
</fieldset>

<fieldset>
  <legend>SugarCRM</legend>
  <div ngModelGroup="sugar">
    <button (click)="handleClick($event, 'conseiller')">Ventes - Conseiller</button>
    <button (click)="handleClick($event, 'jm')">Ventes – Junior Manager</button>
    <button (click)="handleClick($event, 'manager')">Ventes - Manager</button>
    <button (click)="handleClick($event, 'assistant')">Ventes – Assistant de ventes</button>
    <button (click)="handleClick($event, 'qualite')">Agent Qualité</button>
    <button (click)="handleClick($event, 'compta')">Compta</button>
    <button (click)="handleClick($event, 'inactif')">Inactif</button>
    <div class="select">
      <div class="subtitle">Hérite les préférence de l'utilisateur</div>
      <select name="userToCopyHPfrom" [(ngModel)]="fields.userValue">
        <option
        *ngFor="let user of fields.userTemplates ; trackBy: trackByFn"
        [value]="user.value"
        (onChange)="selectTmp($event, user)"
        >{{ user.label }}</option>
      </select>
    </div>
    <div class="checkbox-list" id="sugar_role">
     <div class="subtitle">Role</div>
     <span *ngFor="let role of fields.roles ; trackBy: trackByFn">
      <label>
        <input
        type="checkbox"
        [(ngModel)]="role.checked"
        [name]="role.id"
        >{{ role.label }}
      </label>
    </span>
  </div>
  <div class="checkbox-list" id="sugar_departement">
   <div class="subtitle">Service</div>
   <span *ngFor="let service of fields.services ; trackBy: trackByFn">
    <label>
      <input
      [id]="service.id"
      type="checkbox"
      [name]="service.id"
      [(ngModel)]="service.checked"
      >{{ service.name }}
    </label>
  </span>
</div>
</div>

<div class="select">
 <div class="subtitle">Bureau</div>
 <select
 name="sugar_bureau"
 [(ngModel)]="fields.selectedBureau"
 name="office"
 >
 <option
 *ngFor="let bureau of fields.bureaux ; trackBy: trackByFn"
 [value]="bureau.value"
 >
 {{ bureau.label }}
</option>
</select>
</div>

<div>Fonction</div>
<select
name="fonction"
[(ngModel)]="fields.selectedFunction"
>
<option [ngValue]="null"></option>
<option
*ngFor="let func of fields.functions ; trackBy: trackByFn"
[value]="func.value"
>{{ func.label }}</option>
</select>

<fieldset>
  <legend>Equipe</legend>
  <div ngModelGroup="team">
    <div class="teams" *ngFor="let team of fields.teams ; trackBy: trackByFn">
      <label>
        <input
        type="checkbox"
        [(ngModel)]="team.checked"
        [name]="team.id"
        >{{ team.name }}
      </label>
    </div>
  </div>
</fieldset>

<fieldset>
  <legend>Autres</legend>
  <div ngModelGroup="others" class="autres">
    <div *ngFor="let autre of fields.autres ; trackBy: trackByFn">
      <label>
        <input
        type="checkbox"
        [(ngModel)]="autre.checked"
        [name]="autre.id"
        > {{ autre.name }}
      </label>
    </div>
  </div>
</fieldset>

<fieldset>
  <legend>Destinations</legend>
  <span *ngFor="let dest of fields.destinations ; trackBy: trackByFn">
    <label>
      <input
      type="checkbox"
      [(ngModel)]="dest.checked"
      [name]="dest.name"
      >{{ dest.name }}  |
    </label>
  </span>
</fieldset>

<div class="select">
 <div class="subtitle">Manager</div>
 <select name="manager"
 [(ngModel)]="fields.selectedManager"
 >
 <option
 *ngFor="let manager of fields.managers ; trackBy: trackByFn"
 [value]="manager.name"
 >
 {{ manager.name }}
</option>
</select>
</div>

<fieldset>
  <legend>Organisations</legend>
  <div class="orgas" ngModuleGroup="orgas">
    <div *ngFor="let orga of fields.orgas ; trackBy: trackByFn">
      <label>
        <input
        type="checkbox"
        [(ngModel)]="orga.checked"
        [name]="orga.id"
        >{{ orga.label }}
      </label>
    </div>
  </div>
</fieldset>
<!--   code tourplan sera LEFT(user_name, 6)
-->
<div>
  <label>Code User Tourplan
    <input name="sugar_tourplan" type="text" [(ngModel)]="fields.codeTourplan">
  </label>
</div>

<div>
  <label>Code SON Galileo
    <input
    name="codeSON"
    type="text"
    [(ngModel)]="fields.codeSON">
  </label>
</div>

<div>
  <label>Title
    <input
    name="title"
    type="text"
    [(ngModel)]="fields.title">
  </label>
</div>

<div ngModelGroup="inactive">
  <label>Statut inactif
    <input type="checkbox"
    [(ngModel)]="fields.inactiveStatus"
    name="inactiveStatus"
    >
  </label>
  <label>Statut Employe inactif
    <input type="checkbox"
    [(ngModel)]="fields.inactiveEmployee"
    name="inactiveEmployee"
    >
  </label>
</div>
</fieldset>

<fieldset>
  <legend>Telephonie</legend>
  <div ngModelGroup="switchvox">

    <div>
     <label>Phone Number
       <input name="phone_number" type="tel" [(ngModel)]="fields.phoneNumber">
     </label>
   </div>
   <div>
    <label>Extension
      <input name="extension" type="tel" [(ngModel)]="fields.phoneExtension">
    </label>
  </div>
  <div>
    <label>
      <input
      type="checkbox"
      [(ngModel)]="fields.codevad"
      name="codevad">Téléphonie a distance
    </label>
  </div>
  <div>
    <label>
      <input
      type="checkbox"
      [(ngModel)]="fields.outbound"
      name="outbound">Click to call
    </label>
  </div>
  <div>
    <label>
      <input
      type="checkbox"
      [(ngModel)]="fields.inbound"
      name="inbound">Notifications appels entrants
    </label>
  </div>
</div>
</fieldset>

<fieldset>
  <legend>Google Apps</legend>
  <div class="select">
   <div class="subtitle">Organisation</div>
   <select [(ngModel)]="fields.selectedOrganisation" name="organisation">
    <option *ngFor="let orga of fields.orgas ; trackBy: trackByFn"
    [value]="orga.value">{{ orga.label }}</option>
  </select>
</div>
<div>
  <label>
   <input type="text" name="groupes" [(ngModel)]="fields.groupes">
   Groupes - Séparer les noms de groupes par des ";" et ne pas mettre @planetveo.com>
 </label>
</div>
</fieldset>

<input type="submit" value="Créer l'utilisateur">
</form>

{{ createForm.value | json }}
