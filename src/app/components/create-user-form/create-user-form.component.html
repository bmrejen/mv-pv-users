<h2> Create User Form </h2>

<form
    #createForm="ngForm"
    (ngSubmit)="onSubmit(createForm)"
>

    <ng-container *ngIf="fields != null">
        <mv-accounts [accounts]="fields.accounts"></mv-accounts>
        <mv-credentials
            [currentUser]="currentUser"
            [civilites]="fields.civilites"
            [userFields]="fields.userFields"
            [usersFromSugar]="usersFromSugar"
        ></mv-credentials>

        <mv-phones [currentUser]="currentUser"></mv-phones>

        <mv-profiles
            [currentUser]="currentUser"
            [selectedFunction]="fields.selectedFunction"
            [selectedOffice]="fields.selectedOffice"
            [roles]="roles"
            [userTemplates]="fields.userTemplates"
            [departments]="fields.departments"
            [orgas]="fields.orgas"
            [others]="fields.others"
        ></mv-profiles>

        <mv-office
            [offices]="fields.offices"
            [selectedOffice]="fields.selectedOffice"
        ></mv-office>
        <mv-function
            [functions]="fields.functions"
            [selectedFunction]="fields.selectedFunction"
        ></mv-function>
        <mv-manager
            [managers]="managers"
            [selectedManager]="fields.selectedManager"
        ></mv-manager>

        <mv-destinations [destinations]="destinations"></mv-destinations>
        <mv-teams [teams]="teams"></mv-teams>
        <mv-others [others]="fields.others"></mv-others>
        <mv-extraneous
            [codeTourplan]="fields.codeTourplan"
            [codeSON]="fields.codeSON"
            [title]="fields.title"
            [inactiveEmployee]="fields.inactiveEmployee"
            [inactiveStatus]="fields.inactiveStatus"
            [currentUser]="currentUser"
        ></mv-extraneous>
        <mv-switchvox
            [phoneNumber]="fields.phoneNumber"
            [phoneExtension]="fields.phoneExtension"
            [codevad]="fields.codevad"
            [outbound]="fields.outbound"
            [inbound]="fields.inbound"
        ></mv-switchvox>
        <mv-gapps
            [orgas]="fields.orgas"
            [selectedOrganisation]="fields.selectedOrganisation"
            [groupes]="fields.groupes"
        ></mv-gapps>

        <div *ngIf="errorMsg">ERROR: {{ errorMsg }}</div>
        <button
            [disabled]="!createForm.form.valid"
            type="submit"
        >Cr√©er l'utilisateur</button>
    </ng-container>
</form>
